<!doctype html>
<head>
	<meta charset="utf-8">
	<title>HTML5 Sortable library</title>
  <link rel="stylesheet" href="basscss.css">
  <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
  <script src="html5sortable.js"></script>
</head>
<body>
	<div class="clearfix mb2 white bg-navy">
		<div class="left">
		  <a href="index.html" class="button py2 m0 button-transparent">HTML5 Sortable</a>
		</div>
		<div class="right">
			<a href="https://github.com/lukasoppermann/html5sortable/fork" class="button py2 m0 button-transparent">Fork on GitHub</a>
		</div>
	</div>
	<div class="px2 sm-px3 py2 mb3 col-8 mx-auto">
		<section class="mb3 mx-auto col col-12">
		  <div class="p3 navy bg-yellow">
		    <div class="flex flex-column">
		      <h1 class="h1 m0 flex-auto">
		        HTML5 Sortable
		      </h1>
			    <h2 class="h3 m0">
					Lightweight standalone library for creating sortable lists and grids using native HTML5 drag and drop API.
			    </h2>
		    </div>
		    <div class="sm-flex flex-center mxn2">
		      <div class="flex-auto px0 py2">
						<ul>
							<li>Only 2.54KB (minified and gzipped).</li>
							<li>Built using native HTML5 drag and drop API.</li>
							<li>Supports both list and grid style layouts.</li>
							<li><a href="https://github.com/lukasoppermann/html5sortable">Installation, support & more.</a></li>
						</ul>
		      </div>
		    </div>
		  </div>
		</section>
		<section class="mb3 mx-auto col col-12">
  		<div class="p3 clearfix bg-navy yellow">
				<div class="col col-6">
			    <h2 class="h3 m0">
						Sortable List
			    </h2>
					<div class="mt2 p2 bg-navy border yellow border-yellow">
				    <code class="mb0">
							<div>sortable('.o-sortable', {</div>
							<div class="px2 muted">
								forcePlaceholderSize: true,<br />
								placeholderClass: 'ph-class', <br />
								hoverClass: 'bg-maroon yellow' <br />
							</div>
							<div>});</div>
						</code>
  				</div>
		    </div>
				<div class="col col-6">
					<ul class="ml4 js-sortable sortable list flex flex-column list-reset">
						<li class="p1 mb1 navy bg-yellow" style="position: relative; z-index: 10">Item 1</li>
						<li class="p1 mb1 navy bg-yellow" style="position: relative; z-index: 10">Item 2</li>
						<li class="p1 mb1 navy bg-yellow" style="position: relative; z-index: 10">Item 3</li>
						<li class="p1 mb1 navy bg-yellow" style="position: relative; z-index: 10">Item 4</li>
						<li class="p1 mb1 navy bg-yellow" style="position: relative; z-index: 10">Item 5</li>
						<li class="p1 mb1 navy bg-yellow" style="position: relative; z-index: 10">Item 6</li>
					</ul>
          <button class="ml4 js-serialize-button button navy bg-yellow">Serialize</button>
					<script type="text/javascript">
						sortable('.js-sortable', {
							forcePlaceholderSize: true,
							placeholderClass: 'mb1 bg-navy border border-yellow',
							hoverClass: 'bg-maroon yellow',
              itemSerializer: (item, container) => {
                item.parent = '[parentNode]'
                item.node = '[Node]'
                item.html = item.html.replace('<','&lt;')
                return item
              },
              containerSerializer: (container) => {
                container.node = '[Node]'
                return container
              }
						})
            document.querySelector('.js-serialize-button').addEventListener('click', () => {
              let serialized = sortable('.js-sortable', 'serialize')
              document.querySelector('.serialized-content').innerHTML = JSON.stringify(serialized, null, ' ')
            })
					</script>
		    </div>
			</div>
      <div class="p2 bg-navy border-top yellow border-yellow">
        <h5>Serialized:</h5>
        <code>
          <pre class="serialized-content">
          </pre>
        </code>
      </div>
		</section>



	
		<section class="mb3 mx-auto col col-12">
  		<div class="p3 clearfix bg-yellow maroon">
			<div class="col col-12 mb1">
			<h2 class="h3 m0">Sortable Copy</h2>
			</div>
			<div class="col col-6">
				<div class="p2 bg-yellow border maroon border-maroon mt1">
				<code class="mb0">
					<div>sortable('.o-sortable', {</div>
					<div class="px2 muted">copy:true // default to false</div>
					<div>});</div>
				</code>
			</div>
				<h2 class="h4 mt1">Copy items here</h2>
				<ul class="p2 border maroon border-maroon js-sortable-copy-target sortable list flex flex-column list-reset">
				</ul>
		</div>
			<div class="col col-6">
				<ul class="ml4 js-sortable-copy sortable list flex flex-column list-reset">
					<li class="p1 mb1 yellow bg-maroon" style="position: relative; z-index: 10">Item 1</li>
					<li class="p1 mb1 yellow bg-maroon" style="position: relative; z-index: 10">Item 2</li>
					<li class="p1 mb1 yellow bg-maroon" style="position: relative; z-index: 10">Item 3</li>
					<li class="p1 mb1 yellow bg-maroon" style="position: relative; z-index: 10">Item 4</li>
					<li class="p1 mb1 yellow bg-maroon" style="position: relative; z-index: 10">Item 5</li>
					<li class="p1 mb1 yellow bg-maroon" style="position: relative; z-index: 10">Item 6</li>
				</ul>
			</div>
		</div>
		</section>
	</div>
	<script>
		sortable('.js-sortable-copy', {
		  forcePlaceholderSize: true,
		  copy: true,
				acceptFrom: false,
		  placeholderClass: 'mb1 bg-navy border border-yellow',
		});
		sortable('.js-sortable-copy-target', {
		forcePlaceholderSize: true,
			acceptFrom: '.js-sortable-copy,.js-sortable-copy-target',
		placeholderClass: 'mb1 border border-maroon',
	  });
		sortable('.js-grid', {
					forcePlaceholderSize: true,
					placeholderClass: 'col col-4 border border-maroon'
				});
		sortable('.js-sortable-connected', {
			forcePlaceholderSize: true,
			connectWith: '.js-connected',
			handle: '.js-handle',
			items: 'li',
			placeholderClass: 'border border-white bg-orange mb1'
		});
		sortable('.js-sortable-inner-connected', {
			forcePlaceholderSize: true,
			connectWith: 'js-inner-connected',
			handle: '.js-inner-handle',
			items: '.item',
	maxItems: 3,
			placeholderClass: 'border border-white bg-orange mb1'
		});
		document.querySelector('.js-sortable-connected').addEventListener('sortupdate', function(e){
			console.log('Sortupdate: ', e.detail);
			console.log('Container: ', e.detail.origin.container, ' -> ', e.detail.destination.container);
			console.log('Index: '+e.detail.origin.index+' -> '+e.detail.destination.index);
			console.log('Element Index: '+e.detail.origin.elementIndex+' -> '+e.detail.destination.elementIndex);
		});

		document.querySelector('.js-sortable-connected').addEventListener('sortstart', function(e){
			console.log('Sortstart: ', e.detail);
		});

		document.querySelector('.js-sortable-connected').addEventListener('sortstop', function(e){
			console.log('Sortstop: ', e.detail);
		});

		sortable('.js-sortable-buttons', {
			forcePlaceholderSize: true,
			items: 'li',
			placeholderClass: 'border border-white mb1',
      hoverClass: 'bg-yellow'
		});
		// buttons to add items and reload the list
		// separately to showcase issue without reload
		document.querySelector('.js-add-item-button').addEventListener('click', function(){
			doc = new DOMParser().parseFromString(`<li class="p1 mb1 blue bg-white">new item</li>`, "text/html").body.firstChild;
			document.querySelector('.js-sortable-buttons').appendChild(doc);
		});

		document.querySelector('.js-reload').addEventListener('click', function(){
			console.log('Options before re-init:');
			console.log(document.querySelector('.js-sortable-buttons').h5s.data.opts);
			sortable('.js-sortable-buttons');
			console.log('Options after re-init:');
			console.log(document.querySelector('.js-sortable-buttons').h5s.data.opts);
		});
		// JS DISABLED
		document.querySelector('.js-disable').addEventListener('click', function(){
			var $list = document.querySelector('[data-disabled]');
			if ( $list.getAttribute('data-disabled') === 'false' ) {
				this.innerHTML = 'Enable';
				sortable($list, 'disable');
				$list.setAttribute('data-disabled', true);
				$list.classList.add('muted');
			} else {
				this.innerHTML = 'Disable';
				sortable($list, 'enable');
				$list.setAttribute('data-disabled', false);
				$list.classList.remove('muted');
			}
		});

		// Destroy & Init
		document.querySelector('.js-destroy').addEventListener('click', function(){
			sortable('.js-sortable-buttons', 'destroy');
		});
		document.querySelector('.js-init').addEventListener('click', function(){
			sortable('.js-sortable-buttons', {
				forcePlaceholderSize: true,
				items: 'li',
				placeholderClass: 'border border-white mb1'
			});
		});
	</script>
</body>
